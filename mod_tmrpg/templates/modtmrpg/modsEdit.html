{%extends 'base.html'%}

{%block content%}
{%if data.success_text or data.alert_text%}
<div class="alerts" style="">
{%if data.alert_text%}
<div class="alert alert-danger d-flex align-items-center" id="msg" role="alert">
    <svg class="bi flex-shrink-0 me-2" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
    <div>
      {{data.alert_text}}
    </div>
  </div>
{%endif%}

{%if data.success_text%}
<div class="alert alert-success d-flex align-items-center" id="msg" role="alert">
    <svg class="bi flex-shrink-0 me-2" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
    <div>
      {{data.success_text}}
    </div>
  </div>
{%endif%}
</div>

<style>
  .alerts {
    position:fixed; 
    left: 50%;
    top: 1%;
    transform: translate(-50%, 0%);
    max-width: 90%;
    width: 100%;
    z-index:9999; 
    border-radius:0px
}
</style>

<script>
const sleep = (ms = 0) => new Promise(resolve => setTimeout(resolve, ms));
    

async function delayedGreeting() {
  await sleep(2000);
 
    var currentURL = window.location.href;

    // –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç –≤ URL (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ "success")
    var newURL = currentURL.substring(0, currentURL.lastIndexOf('/'));

    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –Ω–æ–≤—ã–π URL
    window.location.href = newURL+'/';

}

delayedGreeting();
</script>{%endif%}


{%for moder in moders%}
<!-- <h1></h1> -->


  
  <!-- Modal -->
  <div class="modal fade" id="changeMoney{{moder.id}}" tabindex="-1" aria-labelledby="changeMoneyLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="changeMoneyLabel{{moder.id}}">–ò–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <div class="form-outline">
                <form action="" method="post" >
                    {% csrf_token %}
                        <label class="form-label" for="typeNumber{{moder.id}}">–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                        <input type="number" name="amount" id="typeNumber{{moder.id}}" min="0" class="form-control" />

                        </br>
                        <h6>–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä</h6>
                        <input type="radio" class="btn-check" name="options-operator" value="+" id="option1{{moder.id}}" autocomplete="off" checked>
                        <label class="btn" for="option1{{moder.id}}">+</label>
                        
                        <input type="radio" class="btn-check" name="options-operator" value="-" id="option2{{moder.id}}" autocomplete="off">
                        <label class="btn" for="option2{{moder.id}}">-</label>

                        {%if data.moder.is_admin%}
                        <input type="radio" class="btn-check" name="options-operator"value="=" i id="option3{{moder.id}}" autocomplete="off">
                        <label class="btn" for="option3{{moder.id}}">=</label>
                        {%endif%}
                      
                        </br>
                        
                        <label class="form-label" for="reason{{moder.id}}" style="margin-top: 3%;">–ü—Ä–∏—á–∏–Ω–∞:</label>
                        <input type="text" name="reason" maxlength="20" id="reason{{moder.id}}" class="form-control" />

                        <input type="hidden" name="nick" value="{{moder.nickname}}">
                    
            </div>
        </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∏—Ç—å</button>
                <button type="submit" class="btn btn-primary">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
            </div>
        </form>
      </div>
    </div>
  </div>



    <!-- Modal -->
    <div class="modal fade" id="kickmoder{{moder.id}}" tabindex="-1" aria-labelledby="kickmoderLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="kickmoderLabel{{moder.id}}">–°–Ω—è—Ç–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <div class="form-outline">
                  <form action="" method="post" >
                      {% csrf_token %}
                          
                        <h6>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–Ω—è—Ç—å –¥–∞–Ω–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞?</h6>

                          <input type="hidden" name="typePost" value="kickmoder">
                          <input type="hidden" name="nick" value="{{moder.nickname}}">
                      
              </div>
          </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∏—Ç—å</button>
                  <button type="submit" class="btn btn-primary">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
              </div>
          </form>
        </div>
      </div>
    </div>
  {%endfor%}




<div class="conteiner rere row-equal" id="allCards">
  {% for moder in moders %}
  <div class="card cardd test" id="card{{item.id}}">
    <div class="card-content">
      <div class="cardd image-container" style="margin-top: 3%;">
        
        <!-- <img src="/items/moderHeads/moder.{{moder.nickname}}.png"  class="rounded" alt="..."> -->
        <div id="moderIcons" class="avatar" style="background-image: url('/items/moderSkins/moder.{{moder.nickname}}.png');"></div>
        <style>
          #moderIcons {
            width: 128px;
            height: 64px;
          }
        </style>
      </div>
      <div class="text-container">

        <div style="">
        <b><span style="font-size: 18px;" class="card-title">{{moder.nickname}}</span></b></br>
        <span style="font-size: 14px;" class="">‚ôø–î–æ–ª–∂–Ω–æ—Å—Ç—å: <b>{{moder.pex.display_name}}</b></span></br>
        <span class="card-text" style="font-size: 14px;">üíµ–ë–∞–ª–∞–Ω—Å: {{moder.balance}} –±–∞–ª–ª–æ–≤</span></br>
        <span class="card-text" style="font-size: 14px;">üõë–í—ã–≥–æ–≤–æ—Ä–æ–≤: 0/3</span></br>
        <span class="card-text" style="font-size: 14px;">üõúDiscord: <span style="color:{%if moder.discord %}green{%else%}tomato{%endif%}"><b>{%if moder.discord%}–ø—Ä–∏–≤—è–∑–∞–Ω{%else%}–Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω{%endif%}</span></b></span></br>
        <!-- <span class="card-text" style="font-size: 14px;"><span class="">‚ö†Ô∏è{{item.note}}</span></span></br> -->
        </div>

          <button style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .8rem; --bs-btn-font-size: .75rem; margin-top: 2%;" type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#changeMoney{{moder.id}}">–ò–∑–º–µ–Ω–∏—Ç—å –±–∞–ª–ª—ã</button>
          
          <a href="/skinfix/{{moder.nickname}}/" style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .8rem; --bs-btn-font-size: .75rem; margin-top: 2%;" type="button" class="btn btn-primary"  data-bs-target="">—Ñ–∏–∫—Å —Å–∫–∏–Ω</a>
        
        </br>
        <div class="" style="display: block; margin-top: 2%;">
          <form action="" method="post">
            <button style="float: left; margin-right: 3%; --bs-btn-padding-y: .25rem; --bs-btn-padding-x: .8rem; --bs-btn-font-size: .75rem; margin-top: 2%;" type="submit" class="btn btn-outline-danger">–ü–æ–Ω–∏–∑–∏—Ç—å</button>
            <input type="hidden" name="typePost" value="downmoder">
            <input type="hidden" name="nick" value="{{moder.nickname}}">
          </form>
          <form action="" method="post">
            <button style="float: left; margin-right: 3%; --bs-btn-padding-y: .25rem; --bs-btn-padding-x: .8rem; --bs-btn-font-size: .75rem; margin-top: 2%;" type="submit" class="btn btn-outline-success">–ü–æ–≤—ã—Å–∏—Ç—å</button>
            <input type="hidden" name="typePost" value="upmoder">
            <input type="hidden" name="nick" value="{{moder.nickname}}">
          </form>
        </div>
          </br>
          <button style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .8rem; --bs-btn-font-size: .75rem; margin-top: 3%;" type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#kickmoder{{moder.id}}">–°–Ω—è—Ç—å</button>

          <!-- <form action="" method="post">

          </form> -->
      </div>
      
    </div>
  </div>
  {% endfor %}
</div>


<style>
  .cardd {
  float: left;
  width: 320px; /* 300px + 10px (margin-right) + 10px (margin-left) */
  margin-right: 10px;
  margin: 10px;
}

.card-content {
  display: flex;
}

.image-container {
  max-width: 128px;
  max-height: 128px;
}

.text-container {
  /* flex-grow: 1; –£–≤–µ–ª–∏—á—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å —à–∏—Ä–∏–Ω—É —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
  margin: 10px; 
  margin-bottom: 15px;
}

.conteiner {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
}

.test {
  flex: 0 0 450px;
  margin-right: 10px;
  margin-bottom: 10px;  
}

/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–æ–∫–∏ */
.conteiner:last-child {
  justify-content: flex-start;
}
</style>

  <!-- <style>
    .rere {
      display: grid;
    grid-column-gap: 1%;
    grid-template-columns: repeat(auto-fit, 300px);
  }
  </style>  -->
<!-- #allCards -->
  <script>
// $('#allCards').css({ position:"absolute", 
//      left: "50%", 
//     transform: "translate(-50%, 0%)" 
// })
// $('#allCards').centerElement();
  </script>










<style>
@media only screen and (min-width: 768px) {
  /* For mobile phones: */
  .item_images {
    max-width: 176px;
  }
}
  @media only screen and (max-width: 768px) {
  /* For mobile phones: */
  .item_images {
    max-width: 200px;
  }
}
</style>

{%endblock%}




